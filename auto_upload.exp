#!/usr/bin/expect -f

set timeout 300

puts "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
puts "â•‘     ğŸ“¤ è‡ªåŠ¨ä¸Šä¼ å®¢æˆ·ç«¯åˆ°ç”Ÿäº§æœåŠ¡å™¨                             â•‘"
puts "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
puts ""

# 1. ä¸Šä¼ WebåŒ…
puts "ğŸ“¤ 1/4 ä¸Šä¼ WebåŒ…åˆ°downloadsç›®å½•..."
spawn scp /Users/pd/aiç®—åŠ›/aip-edge-tauri/aip-edge-client-web-v1.0.0.tar.gz root@8.218.206.57:/var/www/html/downloads/
expect {
    "password:" {
        send "Pangdashuai1.\r"
        expect eof
    }
    "yes/no" {
        send "yes\r"
        expect "password:"
        send "Pangdashuai1.\r"
        expect eof
    }
}
puts "âœ… WebåŒ…ä¸Šä¼ å®Œæˆ"
sleep 1

# 2. ä¸Šä¼ æºæ–‡ä»¶åˆ°clientç›®å½•
puts "ğŸ“¤ 2/4 ä¸Šä¼ æºæ–‡ä»¶åˆ°clientç›®å½•..."
spawn rsync -avz /Users/pd/aiç®—åŠ›/aip-edge-tauri/src/ root@8.218.206.57:/var/www/html/client/
expect {
    "password:" {
        send "Pangdashuai1.\r"
        expect eof
    }
    "yes/no" {
        send "yes\r"
        expect "password:"
        send "Pangdashuai1.\r"
        expect eof
    }
}
puts "âœ… æºæ–‡ä»¶ä¸Šä¼ å®Œæˆ"
sleep 1

# 3. ä¸Šä¼ ä¸‹è½½é¡µé¢
puts "ğŸ“¤ 3/4 ä¸Šä¼ ä¸‹è½½é¡µé¢..."
spawn scp /Users/pd/aiç®—åŠ›/frontend/website/client-download.html root@8.218.206.57:/var/www/html/
expect {
    "password:" {
        send "Pangdashuai1.\r"
        expect eof
    }
    "yes/no" {
        send "yes\r"
        expect "password:"
        send "Pangdashuai1.\r"
        expect eof
    }
}
puts "âœ… ä¸‹è½½é¡µé¢ä¸Šä¼ å®Œæˆ"
sleep 1

# 4. è®¾ç½®æƒé™
puts "ğŸ”§ 4/4 è®¾ç½®æ–‡ä»¶æƒé™..."
spawn ssh root@8.218.206.57 "chmod -R 755 /var/www/html/client /var/www/html/downloads && chown -R www-data:www-data /var/www/html/client /var/www/html/downloads && ls -lh /var/www/html/downloads/aip-edge-client-web-v1.0.0.tar.gz"
expect {
    "password:" {
        send "Pangdashuai1.\r"
        expect eof
    }
    "yes/no" {
        send "yes\r"
        expect "password:"
        send "Pangdashuai1.\r"
        expect eof
    }
}
puts "âœ… æƒé™è®¾ç½®å®Œæˆ"

puts ""
puts "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
puts "â•‘     âœ… æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ å®Œæˆï¼                                     â•‘"
puts "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
puts ""
puts "ğŸŒ è®¿é—®åœ°å€ï¼š"
puts "   â€¢ http://www.pidbai.com/client"
puts "   â€¢ http://8.218.206.57/client"
puts "   â€¢ http://www.pidbai.com/client-download.html"
puts ""

