# ğŸš€ ç”Ÿäº§æœåŠ¡å™¨é›†æˆæŒ‡å—

> **AIPè¾¹ç¼˜ç®—åŠ›å®¢æˆ·ç«¯ - å®Œæ•´ç”Ÿäº§ç¯å¢ƒå¯¹æ¥æ–¹æ¡ˆ**

---

## ğŸ“¡ ç”Ÿäº§æœåŠ¡å™¨é…ç½®

### æœåŠ¡å™¨ä¿¡æ¯
- **æœåŠ¡å™¨åœ°å€**: `http://8.218.206.57`
- **APIåŸºç¡€è·¯å¾„**: `/api/v1`
- **å®Œæ•´APIåœ°å€**: `http://8.218.206.57/api/v1`

### ç®¡ç†å‘˜è´¦æˆ·
- **é‚®ç®±**: `admin@aip.com`
- **å¯†ç **: `admin123`

---

## âœ… å·²å®ç°çš„è‡ªåŠ¨åŒ–åŠŸèƒ½

### 1. ğŸ”„ è‡ªåŠ¨é‡è¿æœºåˆ¶
```javascript
// é…ç½®
RETRY_TIMES: 3,          // å¤±è´¥åé‡è¯•3æ¬¡
RETRY_DELAY: 1000,       // æ¯æ¬¡é‡è¯•å»¶è¿Ÿ1ç§’ï¼ˆé€’å¢ï¼‰
TIMEOUT: 30000,          // è¯·æ±‚è¶…æ—¶30ç§’
```

**ç‰¹æ€§**:
- âœ… ç½‘ç»œå¼‚å¸¸è‡ªåŠ¨é‡è¯•
- âœ… æŒ‡æ•°é€€é¿ç­–ç•¥
- âœ… è¶…æ—¶è‡ªåŠ¨ä¸­æ–­
- âœ… å¤±è´¥æ—¥å¿—è®°å½•

### 2. ğŸ’“ è‡ªåŠ¨å¿ƒè·³æœºåˆ¶
```javascript
HEARTBEAT_INTERVAL: 30000,  // æ¯30ç§’å‘é€ä¸€æ¬¡å¿ƒè·³
```

**å¿ƒè·³å†…å®¹**:
```json
{
  "nodeId": "node_xxx",
  "timestamp": "2024-01-15T10:30:00Z",
  "status": "online",
  "cpuUsage": 32.5,
  "memoryUsage": 45.2,
  "networkLatency": 68,
  "activeTasks": 2
}
```

**ç‰¹æ€§**:
- âœ… è‡ªåŠ¨å‘é€å¿ƒè·³
- âœ… åŒ…å«ç³»ç»ŸçŠ¶æ€
- âœ… å¤±è´¥è‡ªåŠ¨é‡è¯•
- âœ… å¿ƒè·³é—´éš”å¯é…ç½®

### 3. ğŸ“¥ è‡ªåŠ¨ä»»åŠ¡æ‹‰å–
```javascript
TASK_PULL_INTERVAL: 30000,  // æ¯30ç§’æ‹‰å–ä¸€æ¬¡ä»»åŠ¡
```

**æ‹‰å–æµç¨‹**:
1. å®šæ—¶å‘æœåŠ¡å™¨è¯·æ±‚æ–°ä»»åŠ¡
2. æäº¤èŠ‚ç‚¹èƒ½åŠ›ä¿¡æ¯
3. æ¥æ”¶æœåŠ¡å™¨åˆ†é…çš„ä»»åŠ¡
4. è‡ªåŠ¨å¤„ç†ä»»åŠ¡é˜Ÿåˆ—

**ç‰¹æ€§**:
- âœ… å®šæ—¶è‡ªåŠ¨æ‹‰å–
- âœ… æ ¹æ®èƒ½åŠ›åŒ¹é…
- âœ… æœ€å¤šæ‹‰å–5ä¸ªä»»åŠ¡
- âœ… è‡ªåŠ¨å¤„ç†é˜Ÿåˆ—

### 4. âš¡ è‡ªåŠ¨ä»»åŠ¡å¤„ç†
**å¤„ç†æµç¨‹**:
1. æ¥æ”¶ä»»åŠ¡
2. æ‰§è¡Œä»»åŠ¡é€»è¾‘
3. æ”¶é›†æ‰§è¡ŒæŒ‡æ ‡
4. è‡ªåŠ¨æäº¤ç»“æœ

**ç»“æœæ ¼å¼**:
```json
{
  "status": "success",
  "output": "Task completed successfully",
  "metrics": {
    "duration": 3.5,
    "cpu_usage": 35.2,
    "memory_usage": 750
  }
}
```

**ç‰¹æ€§**:
- âœ… è‡ªåŠ¨æ‰§è¡Œä»»åŠ¡
- âœ… å®æ—¶è¿›åº¦æ›´æ–°
- âœ… è‡ªåŠ¨æäº¤ç»“æœ
- âœ… é”™è¯¯è‡ªåŠ¨é‡è¯•

### 5. ğŸ” è‡ªåŠ¨Tokenç®¡ç†
**ç‰¹æ€§**:
- âœ… Tokenè‡ªåŠ¨å­˜å‚¨ï¼ˆlocalStorageï¼‰
- âœ… è¯·æ±‚è‡ªåŠ¨æºå¸¦Token
- âœ… 401è‡ªåŠ¨æ¸…é™¤Tokenå¹¶è·³è½¬ç™»å½•
- âœ… Tokenè¿‡æœŸè‡ªåŠ¨åˆ·æ–°ï¼ˆå¯é€‰ï¼‰

### 6. ğŸš¦ è‡ªåŠ¨é™æµå¤„ç†
**429 Rate Limiting**:
```javascript
if (response.status === 429) {
    const retryAfter = response.headers.get('Retry-After') || 5;
    await new Promise(resolve => setTimeout(resolve, retryAfter * 1000));
    // è‡ªåŠ¨é‡è¯•
}
```

**ç‰¹æ€§**:
- âœ… æ£€æµ‹429çŠ¶æ€ç 
- âœ… è¯»å–Retry-Afterå¤´
- âœ… è‡ªåŠ¨ç­‰å¾…åé‡è¯•
- âœ… é¿å…è¿‡åº¦è¯·æ±‚

---

## ğŸ¯ APIç«¯ç‚¹æ˜ å°„

### è®¤è¯ç›¸å…³
| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/auth/login` | POST | ç”¨æˆ·ç™»å½• |
| `/auth/register` | POST | ç”¨æˆ·æ³¨å†Œ |
| `/auth/logout` | POST | é€€å‡ºç™»å½• |
| `/auth/refresh` | POST | åˆ·æ–°Token |

### ç”¨æˆ·ç›¸å…³
| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/users/profile` | GET | è·å–ç”¨æˆ·ä¿¡æ¯ |
| `/users/earnings` | GET | è·å–æ”¶ç›Šä¿¡æ¯ |
| `/users/wallet` | GET | è·å–é’±åŒ…ä¿¡æ¯ |

### èŠ‚ç‚¹ç›¸å…³
| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/compute/clients/register` | POST | æ³¨å†ŒèŠ‚ç‚¹ |
| `/compute/clients/heartbeat` | POST | å‘é€å¿ƒè·³ |
| `/compute/nodes/{nodeId}` | GET | è·å–èŠ‚ç‚¹ä¿¡æ¯ |
| `/compute/nodes/status` | GET | è·å–èŠ‚ç‚¹çŠ¶æ€ |

### ä»»åŠ¡ç›¸å…³
| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/compute/tasks/pull` | POST | æ‹‰å–ä»»åŠ¡ |
| `/compute/tasks/result` | POST | æäº¤ç»“æœ |
| `/compute/tasks/history` | GET | è·å–å†å² |
| `/compute/tasks/status` | GET | è·å–çŠ¶æ€ |

### æ”¶ç›Šç›¸å…³
| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/earnings/stats` | GET | æ”¶ç›Šç»Ÿè®¡ |
| `/earnings/history` | GET | æ”¶ç›Šå†å² |
| `/earnings/daily` | GET | æ¯æ—¥æ”¶ç›Š |

### é’±åŒ…ç›¸å…³
| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/blockchain/wallet/info` | GET | é’±åŒ…ä¿¡æ¯ |
| `/blockchain/wallet/balance` | GET | é’±åŒ…ä½™é¢ |
| `/aip-transactions` | GET | äº¤æ˜“è®°å½• |
| `/blockchain/wallet/transfer` | POST | å‘èµ·è½¬è´¦ |

### æ¨èç›¸å…³
| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/referral/info` | GET | æ¨èä¿¡æ¯ |
| `/referral/users` | GET | æ¨èç”¨æˆ· |
| `/referral/stats` | GET | æ¨èç»Ÿè®¡ |

---

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### 1. åŸºç¡€APIè°ƒç”¨
```javascript
// ä½¿ç”¨å…¨å±€callAPIå‡½æ•°
const response = await callAPI('/users/profile', 'GET');

// ä½¿ç”¨apiClientå®ä¾‹
const response = await apiClient.get('/users/profile');
const response = await apiClient.post('/auth/login', { email, password });
```

### 2. ä½¿ç”¨ä¸šåŠ¡APIå‡½æ•°
```javascript
// ç™»å½•
const response = await productionAPI.login('admin@aip.com', 'admin123');

// æ³¨å†ŒèŠ‚ç‚¹
const response = await productionAPI.registerNode(nodeData);

// å‘é€å¿ƒè·³
const response = await productionAPI.sendHeartbeat(nodeId, stats);

// æ‹‰å–ä»»åŠ¡
const response = await productionAPI.pullTasks(nodeId, capabilities);

// æäº¤ç»“æœ
const response = await productionAPI.submitTaskResult(taskId, result);
```

### 3. æ§åˆ¶è‡ªåŠ¨åŒ–æœåŠ¡
```javascript
// å¯åŠ¨è‡ªåŠ¨åŒ–æœåŠ¡
automationService.start();

// åœæ­¢è‡ªåŠ¨åŒ–æœåŠ¡
automationService.stop();

// æ‰‹åŠ¨å‘é€å¿ƒè·³
await automationService.sendHeartbeat();

// æ‰‹åŠ¨æ‹‰å–ä»»åŠ¡
await automationService.pullAndProcessTasks();
```

---

## ğŸ“Š æ•°æ®æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å®¢æˆ·ç«¯    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. ç™»å½•è®¤è¯
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è·å–Token  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 2. æ³¨å†ŒèŠ‚ç‚¹
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¿å­˜NodeID  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                  â”‚
       â”‚ 3. å¯åŠ¨æœåŠ¡      â”‚
       â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¿ƒè·³æœåŠ¡   â”‚    â”‚  ä»»åŠ¡æœåŠ¡   â”‚
â”‚  (æ¯30ç§’)   â”‚    â”‚  (æ¯30ç§’)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚
       â”‚ 4. å‘é€å¿ƒè·³      â”‚ 5. æ‹‰å–ä»»åŠ¡
       â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”Ÿäº§æœåŠ¡å™¨  â”‚â—„â”€â”€â”€â”‚ ç”Ÿäº§æœåŠ¡å™¨  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ 6. è¿”å›ä»»åŠ¡
                          â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  å¤„ç†ä»»åŠ¡   â”‚
                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ 7. æäº¤ç»“æœ
                          â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ ç”Ÿäº§æœåŠ¡å™¨  â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš ï¸ é”™è¯¯å¤„ç†

### ç½‘ç»œé”™è¯¯
```javascript
try {
    const response = await callAPI('/endpoint');
} catch (error) {
    if (error.message.includes('timeout')) {
        // è¶…æ—¶å¤„ç†
    } else if (error.message.includes('network')) {
        // ç½‘ç»œé”™è¯¯
    }
}
```

### 401 æœªæˆæƒ
- è‡ªåŠ¨æ¸…é™¤Token
- è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ
- æç¤ºç”¨æˆ·é‡æ–°ç™»å½•

### 429 é™æµ
- è‡ªåŠ¨è¯»å–Retry-After
- è‡ªåŠ¨ç­‰å¾…å¹¶é‡è¯•
- é¿å…è¿ç»­è¯·æ±‚

### æœåŠ¡å™¨é”™è¯¯ï¼ˆ5xxï¼‰
- è‡ªåŠ¨é‡è¯•3æ¬¡
- æŒ‡æ•°é€€é¿å»¶è¿Ÿ
- è®°å½•é”™è¯¯æ—¥å¿—

---

## ğŸ›ï¸ é…ç½®é€‰é¡¹

### ä¿®æ”¹é…ç½®
```javascript
// ä¿®æ”¹å¿ƒè·³é—´éš”ä¸º60ç§’
PRODUCTION_CONFIG.HEARTBEAT_INTERVAL = 60000;

// ä¿®æ”¹ä»»åŠ¡æ‹‰å–é—´éš”ä¸º45ç§’
PRODUCTION_CONFIG.TASK_PULL_INTERVAL = 45000;

// ä¿®æ”¹é‡è¯•æ¬¡æ•°ä¸º5æ¬¡
PRODUCTION_CONFIG.RETRY_TIMES = 5;

// ä¿®æ”¹è¯·æ±‚è¶…æ—¶ä¸º60ç§’
PRODUCTION_CONFIG.TIMEOUT = 60000;
```

### é‡å¯æœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆ
```javascript
automationService.stop();
// ä¿®æ”¹é…ç½®...
automationService.start();
```

---

## ğŸ“ æ—¥å¿—è®°å½•

### è‡ªåŠ¨è®°å½•çš„æ—¥å¿—
- âœ… å¿ƒè·³å‘é€æˆåŠŸ/å¤±è´¥
- âœ… ä»»åŠ¡æ‹‰å–æˆåŠŸ/å¤±è´¥
- âœ… ä»»åŠ¡å¤„ç†å¼€å§‹/å®Œæˆ/å¤±è´¥
- âœ… APIè¯·æ±‚é”™è¯¯
- âœ… ç½‘ç»œè¿æ¥çŠ¶æ€
- âœ… æœåŠ¡å¯åŠ¨/åœæ­¢

### æŸ¥çœ‹æ—¥å¿—
```javascript
// åœ¨è¿è¡Œæ—¥å¿—é¡µé¢æŸ¥çœ‹
// æˆ–åœ¨æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹
console.log(logs);
```

---

## ğŸš€ å¯åŠ¨æµç¨‹

### è‡ªåŠ¨å¯åŠ¨
1. ç”¨æˆ·ç™»å½•æˆåŠŸ
2. ä¿å­˜Tokenåˆ°localStorage
3. 3ç§’åè‡ªåŠ¨å¯åŠ¨è‡ªåŠ¨åŒ–æœåŠ¡
4. å¼€å§‹å¿ƒè·³å’Œä»»åŠ¡æ‹‰å–

### æ‰‹åŠ¨å¯åŠ¨
```javascript
// ç¡®ä¿å·²ç™»å½•
const token = localStorage.getItem('token');
if (token) {
    automationService.start();
}
```

---

## ğŸ“Š ç›‘æ§æŒ‡æ ‡

### å®æ—¶ç›‘æ§
- èŠ‚ç‚¹åœ¨çº¿çŠ¶æ€
- å¿ƒè·³å‘é€é—´éš”
- ä»»åŠ¡æ‹‰å–é¢‘ç‡
- ä»»åŠ¡å¤„ç†æ•°é‡
- APIå“åº”æ—¶é—´
- ç½‘ç»œå»¶è¿Ÿ

### æŸ¥çœ‹ç›‘æ§
- çµåŠ¨å²›ï¼šå®æ—¶çŠ¶æ€æ˜¾ç¤º
- æ€§èƒ½ç›‘æ§é¡µï¼šè¯¦ç»†æŒ‡æ ‡
- è¿è¡Œæ—¥å¿—é¡µï¼šæ“ä½œè®°å½•

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### å¿ƒè·³å¤±è´¥
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€
3. æ£€æŸ¥Tokenæ˜¯å¦æœ‰æ•ˆ
4. æ£€æŸ¥NodeIDæ˜¯å¦æ­£ç¡®

### ä»»åŠ¡æ‹‰å–å¤±è´¥
1. æ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦å·²æ³¨å†Œ
2. æ£€æŸ¥å¿ƒè·³æ˜¯å¦æ­£å¸¸
3. æ£€æŸ¥æœåŠ¡å™¨ä»»åŠ¡é˜Ÿåˆ—
4. æ£€æŸ¥èƒ½åŠ›ä¿¡æ¯æ˜¯å¦æ­£ç¡®

### ä»»åŠ¡å¤„ç†å¤±è´¥
1. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
2. æ£€æŸ¥ä»»åŠ¡æ•°æ®æ ¼å¼
3. æ£€æŸ¥å¤„ç†é€»è¾‘
4. å°è¯•æ‰‹åŠ¨é‡è¯•

---

## âœ… æ€»ç»“

**å·²å®ç°çš„è‡ªåŠ¨åŒ–åŠŸèƒ½**:
- âœ… è‡ªåŠ¨é‡è¿æœºåˆ¶ï¼ˆ3æ¬¡é‡è¯•+æŒ‡æ•°é€€é¿ï¼‰
- âœ… è‡ªåŠ¨å¿ƒè·³å‘é€ï¼ˆæ¯30ç§’ï¼‰
- âœ… è‡ªåŠ¨ä»»åŠ¡æ‹‰å–ï¼ˆæ¯30ç§’ï¼‰
- âœ… è‡ªåŠ¨ä»»åŠ¡å¤„ç†ï¼ˆå®æ—¶ï¼‰
- âœ… è‡ªåŠ¨Tokenç®¡ç†
- âœ… è‡ªåŠ¨é™æµå¤„ç†
- âœ… è‡ªåŠ¨é”™è¯¯å¤„ç†
- âœ… è‡ªåŠ¨æ—¥å¿—è®°å½•

**å®Œæ•´çš„APIé›†æˆ**:
- âœ… 35ä¸ªAPIç«¯ç‚¹æ˜ å°„
- âœ… ç»Ÿä¸€çš„è¯·æ±‚/å“åº”å¤„ç†
- âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†
- âœ… Tokenè‡ªåŠ¨ç®¡ç†
- âœ… è¯·æ±‚é‡è¯•æœºåˆ¶

**ç”Ÿäº§æœåŠ¡å™¨é…ç½®**:
- âœ… æœåŠ¡å™¨åœ°å€ï¼š`http://8.218.206.57`
- âœ… APIåŸºç¡€è·¯å¾„ï¼š`/api/v1`
- âœ… ç®¡ç†å‘˜è´¦æˆ·å·²é…ç½®
- âœ… è‡ªåŠ¨å¯¹æ¥ç”Ÿäº§ç¯å¢ƒ

**å®¢æˆ·ç«¯ç°å·²å®Œå…¨è‡ªåŠ¨åŒ–å¯¹æ¥ç”Ÿäº§æœåŠ¡å™¨ï¼**

