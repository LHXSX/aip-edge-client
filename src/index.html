<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIP边缘算力客户端</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="ui-optimizer.css">
    <link rel="stylesheet" href="quality-fix.css">
    <link rel="stylesheet" href="modern-charts.css">
    <link rel="stylesheet" href="settings-styles.css">
  </head>
<body>
    <div id="app">
        <!-- 登录页面 -->
        <div id="login-page" class="page">
            <div class="glass-card">
                <div class="logo-container">
                    <div class="logo-icon">⚡</div>
                    <h1 class="title">AIP边缘算力</h1>
                    <p class="subtitle">去中心化AI算力共享平台</p>
                    <p class="description">
                        登录后自动注册节点并开始工作<br>
                        共享算力，获得AIP代币奖励
                    </p>
                </div>
                
                <div class="form-group">
                    <label>📧 邮箱地址</label>
                    <input type="email" id="email" placeholder="your@email.com" class="glass-input" value="admin@aip.com">
                </div>
                
                <div class="form-group">
                    <label>🔒 密码</label>
                    <input type="password" id="password" placeholder="请输入密码" class="glass-input" value="admin123">
                </div>
                
                <div id="error-message" class="error-message" style="display:none"></div>
                
                <button id="login-btn" class="btn-primary">登 录</button>
                <button id="register-btn" class="btn-secondary">还没有账户？立即注册</button>
            </div>
        </div>
        
        <!-- 主页面 -->
        <div id="main-page" class="page" style="display:none">
            <div class="navbar">
                <div class="nav-logo">
                    <div class="nav-icon">⚡</div>
                    <div class="nav-text">
                        <div class="nav-title">AIP边缘算力</div>
                        <div class="nav-subtitle">Edge Computing Platform</div>
                    </div>
                </div>
                
                <!-- 灵动岛实时状态 -->
                <div id="dynamic-island" style="flex: 1; max-width: 700px; margin: 0 24px; background: rgba(255,255,255,0.15); backdrop-filter: blur(20px); border-radius: 24px; padding: 8px 20px; border: 1px solid rgba(255,255,255,0.25);">
                    <div style="display: flex; align-items: center; justify-content: space-around; gap: 16px; font-size: 12px;">
                        <div style="display: flex; align-items: center; gap: 6px;">
                            <span id="node-pulse" style="width: 7px; height: 7px; background: #10b981; border-radius: 50%; box-shadow: 0 0 6px #10b981; animation: pulse 2s infinite;"></span>
                            <span style="color: white; font-weight: 600;">节点在线</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 6px;">
                            <span style="animation: heartbeat 1.5s infinite;">💓</span>
                            <span style="color: white; font-weight: 600;" id="heartbeat-status">心跳正常</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 6px;">
                            <span>⏱️</span>
                            <span style="color: white; font-weight: 600;" id="runtime">00:00:00</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 6px;">
                            <span>📡</span>
                            <span style="color: white; font-weight: 600;" id="ping">0ms</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 6px;">
                            <span>⚡</span>
                            <span style="color: white; font-weight: 600;" id="task-status">0个任务</span>
                        </div>
                    </div>
                </div>
                
                <div class="nav-info">
                    <span class="badge badge-version">v1.0.0</span>
                    <span class="badge badge-status" id="status-badge">未连接</span>
                </div>
            </div>
            
            <div class="main-container">
                <div class="sidebar">
                    <div class="nav-title-small">导航</div>
                    <button class="nav-item active" data-tab="dashboard">
                        <span class="icon">📊</span> 仪表盘
                    </button>
                    <button class="nav-item" data-tab="tasks">
                        <span class="icon">⚡</span> 任务运行
                    </button>
                    <button class="nav-item" data-tab="earnings">
                        <span class="icon">💰</span> 收益统计
                    </button>
                    <button class="nav-item" data-tab="logs">
                        <span class="icon">📝</span> 运行日志
                    </button>
                    <button class="nav-item" data-tab="performance">
                        <span class="icon">📈</span> 性能监控
                    </button>
                    <button class="nav-item" data-tab="history">
                        <span class="icon">📋</span> 任务历史
                    </button>
                    <button class="nav-item" data-tab="settings">
                        <span class="icon">⚙️</span> 设置
                    </button>
                    <button class="nav-item" data-tab="wallet">
                        <span class="icon">💎</span> 钱包
                    </button>
                    <button class="nav-item" data-tab="referral">
                        <span class="icon">🎁</span> 推荐
                    </button>
                    <button class="nav-item" data-tab="diagnostics">
                        <span class="icon">🔍</span> 诊断
                    </button>
                    <button class="nav-item" data-tab="notifications">
                        <span class="icon">🔔</span> 通知
                    </button>
                    <button class="nav-item" data-tab="updates">
                        <span class="icon">🔄</span> 更新
                    </button>
                </div>
                
                <div class="content">
                    <!-- 仪表盘 -->
                    <div id="dashboard-tab" class="tab-content active">
                        <h2>📊 仪表盘</h2>
                        
                        <div class="grid-4" style="margin-bottom: 28px;">
                            <div class="dashboard-card card-purple">
                                <div class="stat-value" id="completed-tasks">0</div>
                                <div class="stat-label">已完成任务</div>
                            </div>
                            <div class="dashboard-card card-green">
                                <div class="stat-value" id="total-earnings">0.0000</div>
                                <div class="stat-label">AIP 奖励</div>
                            </div>
                            <div class="dashboard-card card-blue">
                                <div class="stat-value" id="cpu-usage">0%</div>
                                <div class="stat-label">CPU 使用率</div>
                            </div>
                            <div class="dashboard-card card-orange">
                                <div class="stat-value" id="memory-usage">0%</div>
                                <div class="stat-label">内存使用率</div>
                            </div>
                        </div>
                        
                        <div class="grid-2">
                            <div class="dashboard-card">
                                <h3 style="margin-bottom: 20px; font-size: 20px; font-weight: 700; color: #1f2937;">
                                    💻 系统信息
                                </h3>
                                <div id="system-info" style="color: #6b7280; line-height: 1.8;">
                                    加载中...
                                </div>
                            </div>
                            
                            <div class="dashboard-card">
                                <h3 style="margin-bottom: 20px; font-size: 20px; font-weight: 700; color: #1f2937;">
                                    ⚡ 快速操作
                                </h3>
                                <div style="display: flex; flex-direction: column; gap: 12px;">
                                    <button class="btn btn-pull" onclick="manualPullTasks()">⚡ 拉取任务</button>
                                    <button class="btn btn-refresh" onclick="switchTab('tasks')">📋 查看任务</button>
                                    <button class="btn btn-refresh" onclick="switchTab('settings')">⚙️ 系统设置</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dashboard-card" style="margin-top: 24px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <h3 style="font-size: 20px; font-weight: 700; color: #1f2937;">
                                    📝 运行日志（最新10条）
                                </h3>
                                <div style="display: flex; gap: 8px;">
                                    <span style="padding: 4px 8px; background: #dbeafe; color: #1e40af; border-radius: 8px; font-size: 11px; font-weight: 600;">ℹ️ INFO</span>
                                    <span style="padding: 4px 8px; background: #d1fae5; color: #065f46; border-radius: 8px; font-size: 11px; font-weight: 600;">✅ SUCCESS</span>
                                    <span style="padding: 4px 8px; background: #fef3c7; color: #92400e; border-radius: 8px; font-size: 11px; font-weight: 600;">⚠️ WARN</span>
                                    <span style="padding: 4px 8px; background: #fee2e2; color: #991b1b; border-radius: 8px; font-size: 11px; font-weight: 600;">❌ ERROR</span>
                                </div>
                            </div>
                            <div id="dashboard-logs" style="background: white; padding: 16px; border-radius: 12px; max-height: 400px; overflow-y: auto; border: 2px solid #f3f4f6;">
                                <div style="text-align: center; padding: 40px; color: #9ca3af;">
                                    <div style="font-size: 32px; margin-bottom: 12px;">📋</div>
                                    <p>等待日志输出...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 任务运行 - 完整8模块 -->
                    <div id="tasks-tab" class="tab-content">
                        <h2>⚡ 任务运行</h2>
                        
                        <!-- 任务统计卡片 -->
                        <div class="grid-4" style="margin-bottom: 24px;">
                            <div class="dashboard-card" style="background: #dbeafe; border-left: 4px solid #3b82f6;">
                                <div style="font-size: 28px; font-weight: 800; color: #1e40af;" id="running-count">0</div>
                                <div style="font-size: 13px; color: #1e40af; font-weight: 600;">运行中</div>
                            </div>
                            <div class="dashboard-card" style="background: #fef3c7; border-left: 4px solid #f59e0b;">
                                <div style="font-size: 28px; font-weight: 800; color: #92400e;" id="waiting-count">0</div>
                                <div style="font-size: 13px; color: #92400e; font-weight: 600;">等待中</div>
                            </div>
                            <div class="dashboard-card" style="background: #d1fae5; border-left: 4px solid #10b981;">
                                <div style="font-size: 28px; font-weight: 800; color: #065f46;" id="completed-count">0</div>
                                <div style="font-size: 13px; color: #065f46; font-weight: 600;">已完成</div>
                            </div>
                            <div class="dashboard-card" style="background: #fee2e2; border-left: 4px solid #ef4444;">
                                <div style="font-size: 28px; font-weight: 800; color: #991b1b;" id="failed-count">0</div>
                                <div style="font-size: 13px; color: #991b1b; font-weight: 600;">失败</div>
                            </div>
                        </div>
                        
                        <!-- 操作栏 -->
                        <div style="margin-bottom: 20px; display: flex; gap: 12px; align-items: center;">
                            <button class="btn btn-pull" onclick="manualPullTasks()">⚡ 拉取任务</button>
                            <button class="btn btn-refresh" onclick="refreshTaskList()">🔄 刷新</button>
                            <select id="task-filter" style="padding: 10px 16px; border-radius: 10px; border: 2px solid #e5e7eb; background: white;">
                                <option value="all">全部任务</option>
                                <option value="running">运行中</option>
                                <option value="waiting">等待中</option>
                                <option value="completed">已完成</option>
                                <option value="failed">失败</option>
                            </select>
                            <input type="text" id="task-search" placeholder="搜索任务ID..." style="flex: 1; padding: 10px 16px; border-radius: 10px; border: 2px solid #e5e7eb;">
                        </div>
                        
                        <!-- 运行中的任务 -->
                        <div class="dashboard-card" style="margin-bottom: 24px;">
                            <h3 style="margin-bottom: 16px; font-size: 18px; font-weight: 700; color: #1f2937;">
                                🔄 运行中的任务
                            </h3>
                            <div id="running-tasks-list">
                                <div style="text-align: center; padding: 40px; color: #9ca3af;">
                                    暂无运行中的任务
                                </div>
                            </div>
                        </div>
                        
                        <!-- 等待中的任务 -->
                        <div class="dashboard-card" style="margin-bottom: 24px;">
                            <h3 style="margin-bottom: 16px; font-size: 18px; font-weight: 700; color: #1f2937;">
                                ⏳ 等待中的任务
                            </h3>
                            <div id="waiting-tasks-list">
                                <div style="text-align: center; padding: 40px; color: #9ca3af;">
                                    暂无等待中的任务
                                </div>
                            </div>
                        </div>
                        
                        <!-- 所有任务列表 -->
                        <div class="dashboard-card">
                            <h3 style="margin-bottom: 16px; font-size: 18px; font-weight: 700; color: #1f2937;">
                                📋 任务列表
                            </h3>
                            <div id="all-tasks-table"></div>
                        </div>
                    </div>
                    
                    <!-- 收益统计 - 深度开发版 -->
                    <div id="earnings-tab" class="tab-content">
                        <h2>💰 收益统计</h2>
                        
                        <!-- 核心收益卡片 -->
                        <div class="grid-4" style="margin-bottom: 28px;">
                            <div class="dashboard-card card-green">
                                <div style="font-size: 14px; color: white; opacity: 0.9; margin-bottom: 8px;">💎 总收益</div>
                                <div class="stat-value" id="total-earnings-detail">0.0000</div>
                                <div class="stat-label">AIP Token</div>
                            </div>
                            <div class="dashboard-card card-blue">
                                <div style="font-size: 14px; color: white; opacity: 0.9; margin-bottom: 8px;">📅 今日收益</div>
                                <div class="stat-value" id="today-earnings">0.0000</div>
                                <div class="stat-label">AIP Token</div>
                            </div>
                            <div class="dashboard-card card-purple">
                                <div style="font-size: 14px; color: white; opacity: 0.9; margin-bottom: 8px;">📈 预计今日</div>
                                <div class="stat-value" id="estimated-earnings">0.0000</div>
                                <div class="stat-label">AIP Token</div>
                            </div>
                            <div class="dashboard-card card-orange">
                                <div style="font-size: 14px; color: white; opacity: 0.9; margin-bottom: 8px;">📊 昨日收益</div>
                                <div class="stat-value" id="yesterday-earnings">0.0000</div>
                                <div class="stat-label">AIP Token</div>
                            </div>
                        </div>
                        
                        <!-- 更多统计 -->
                        <div class="grid-2" style="margin-bottom: 28px;">
                            <div class="dashboard-card">
                                <div style="font-size: 16px; font-weight: 700; color: #1f2937; margin-bottom: 16px;">
                                    📊 本周收益
                                </div>
                                <div style="font-size: 32px; font-weight: 800; color: #667eea;" id="week-earnings">0.0000</div>
                                <div style="font-size: 13px; color: #6b7280; margin-top: 8px;">AIP Token</div>
                            </div>
                            <div class="dashboard-card">
                                <div style="font-size: 16px; font-weight: 700; color: #1f2937; margin-bottom: 16px;">
                                    📊 本月收益
                                </div>
                                <div style="font-size: 32px; font-weight: 800; color: #10b981;" id="month-earnings">0.0000</div>
                                <div style="font-size: 13px; color: #6b7280; margin-top: 8px;">AIP Token</div>
                            </div>
                        </div>
                        
                        <!-- 收益趋势图 -->
                        <div class="dashboard-card" style="margin-bottom: 28px;">
                            <h3 style="margin-bottom: 20px; font-size: 20px; font-weight: 700; color: #1f2937;">
                                📈 收益趋势（最近30天）
                            </h3>
                            <canvas id="earnings-trend-chart" width="800" height="300" style="width: 100%; height: auto;"></canvas>
                        </div>
                        
                        <!-- 收益类型分布 -->
                        <div class="grid-2" style="margin-bottom: 28px;">
                            <div class="dashboard-card">
                                <h3 style="margin-bottom: 20px; font-size: 20px; font-weight: 700; color: #1f2937;">
                                    🎯 收益来源分布
                                </h3>
                                <div id="earnings-type-distribution"></div>
                            </div>
                            
                            <div class="dashboard-card">
                                <h3 style="margin-bottom: 20px; font-size: 20px; font-weight: 700; color: #1f2937;">
                                    💸 提现管理
                                </h3>
                                <div style="margin-bottom: 16px;">
                                    <div style="color: #6b7280; font-size: 13px; margin-bottom: 8px;">可提现金额</div>
                                    <div style="font-size: 28px; font-weight: 800; color: #10b981;" id="withdrawable-amount">0.0000 AIP</div>
                                </div>
                                <button class="btn btn-pull" onclick="openWithdraw()">💸 申请提现</button>
                                <p style="font-size: 12px; color: #9ca3af; margin-top: 12px;">
                                    * 最小提现额度: 10 AIP
                                </p>
                            </div>
                        </div>
                        
                        <!-- 收益历史记录 -->
                        <div class="dashboard-card">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <h3 style="font-size: 20px; font-weight: 700; color: #1f2937;">
                                    📜 收益历史记录
                                </h3>
                                <button class="btn btn-refresh" onclick="exportEarnings()">📥 导出数据</button>
                            </div>
                            <div id="earnings-history"></div>
                        </div>
                    </div>
                    
                    <!-- 运行日志 - 美化版 -->
                    <div id="logs-tab" class="tab-content">
                        <h2>📝 运行日志</h2>
                        
                        <!-- 日志统计卡片 -->
                        <div class="grid-4" style="margin-bottom: 24px;">
                            <div class="dashboard-card" style="background: #dbeafe; border-left: 4px solid #3b82f6;">
                                <div style="font-size: 28px; font-weight: 800; color: #1e40af;" id="info-count">0</div>
                                <div style="font-size: 13px; color: #1e40af; font-weight: 600;">ℹ️ 信息</div>
                            </div>
                            <div class="dashboard-card" style="background: #d1fae5; border-left: 4px solid #10b981;">
                                <div style="font-size: 28px; font-weight: 800; color: #065f46;" id="success-count">0</div>
                                <div style="font-size: 13px; color: #065f46; font-weight: 600;">✅ 成功</div>
                            </div>
                            <div class="dashboard-card" style="background: #fef3c7; border-left: 4px solid #f59e0b;">
                                <div style="font-size: 28px; font-weight: 800; color: #92400e;" id="warn-count">0</div>
                                <div style="font-size: 13px; color: #92400e; font-weight: 600;">⚠️ 警告</div>
                            </div>
                            <div class="dashboard-card" style="background: #fee2e2; border-left: 4px solid #ef4444;">
                                <div style="font-size: 28px; font-weight: 800; color: #991b1b;" id="error-count">0</div>
                                <div style="font-size: 13px; color: #991b1b; font-weight: 600;">❌ 错误</div>
                            </div>
                        </div>
                        
                        <!-- 操作栏 -->
                        <div class="dashboard-card" style="margin-bottom: 20px; padding: 20px;">
                            <div style="display: flex; gap: 12px; align-items: center;">
                                <select id="log-level" onchange="filterLogs()" style="padding: 12px 16px; border-radius: 10px; border: 2px solid #e5e7eb; background: white; font-weight: 600;">
                                    <option value="ALL">📋 全部日志</option>
                                    <option value="INFO">ℹ️ 信息</option>
                                    <option value="SUCCESS">✅ 成功</option>
                                    <option value="WARN">⚠️ 警告</option>
                                    <option value="ERROR">❌ 错误</option>
                                    <option value="DEBUG">🔧 调试</option>
                                </select>
                                <input type="text" id="log-search" placeholder="🔍 搜索日志内容..." style="flex: 1; padding: 12px 16px; border-radius: 10px; border: 2px solid #e5e7eb;" oninput="filterLogs()">
                                <button class="btn btn-refresh" onclick="clearLogs()">🗑️ 清空</button>
                                <button class="btn btn-pull" onclick="exportLogs()">📥 导出</button>
                                <button class="btn btn-refresh" onclick="updateLogsPage()">🔄 刷新</button>
                            </div>
                        </div>
                        
                        <!-- 日志容器 -->
                        <div class="dashboard-card">
                            <div id="logs-container" style="background: white; padding: 0; border-radius: 12px; max-height: 650px; overflow-y: auto;">
                                <div style="text-align: center; padding: 60px; color: #9ca3af;">
                                    <div style="font-size: 48px; margin-bottom: 16px;">📋</div>
                                    <p style="font-size: 16px;">等待日志输出...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 性能监控 - 精致2x4布局 -->
                    <div id="performance-tab" class="tab-content">
                        <h2>📈 性能监控</h2>
                        
                        <!-- 第一排：4个性能卡片 -->
                        <div class="grid-4" style="margin-bottom: 20px;">
                            <div class="dashboard-card" style="padding: 20px; background: linear-gradient(135deg, #3b82f6, #2563eb); color: white;">
                                <div style="font-size: 11px; opacity: 0.9; margin-bottom: 8px; font-weight: 600;">💻 CPU使用率</div>
                                <div style="font-size: 32px; font-weight: 800; margin-bottom: 4px;" id="perf-cpu">0%</div>
                                <div style="font-size: 10px; opacity: 0.8;" id="cpu-cores-mini">-核心</div>
                            </div>
                            
                            <div class="dashboard-card" style="padding: 20px; background: linear-gradient(135deg, #10b981, #059669); color: white;">
                                <div style="font-size: 11px; opacity: 0.9; margin-bottom: 8px; font-weight: 600;">💾 内存使用</div>
                                <div style="font-size: 32px; font-weight: 800; margin-bottom: 4px;" id="perf-memory">0%</div>
                                <div style="font-size: 10px; opacity: 0.8;" id="memory-detail">0/0 GB</div>
                            </div>
                            
                            <div class="dashboard-card" style="padding: 20px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white;">
                                <div style="font-size: 11px; opacity: 0.9; margin-bottom: 8px; font-weight: 600;">🎮 GPU状态</div>
                                <div style="font-size: 32px; font-weight: 800; margin-bottom: 4px;" id="perf-gpu">N/A</div>
                                <div style="font-size: 10px; opacity: 0.8;">未检测到</div>
                            </div>
                            
                            <div class="dashboard-card" style="padding: 20px; background: linear-gradient(135deg, #f59e0b, #d97706); color: white;">
                                <div style="font-size: 11px; opacity: 0.9; margin-bottom: 8px; font-weight: 600;">📡 网络延迟</div>
                                <div style="font-size: 32px; font-weight: 800; margin-bottom: 4px;" id="perf-ping">0ms</div>
                                <div style="font-size: 10px; opacity: 0.8;">服务器响应</div>
                            </div>
                        </div>
                        
                        <!-- 第二排：4个性能卡片 -->
                        <div class="grid-4" style="margin-bottom: 28px;">
                            <div class="dashboard-card" style="padding: 20px; background: linear-gradient(135deg, #06b6d4, #0891b2); color: white;">
                                <div style="font-size: 11px; opacity: 0.9; margin-bottom: 8px; font-weight: 600;">⬇️ 下载速度</div>
                                <div style="font-size: 28px; font-weight: 800; margin-bottom: 4px;" id="perf-download">0</div>
                                <div style="font-size: 10px; opacity: 0.8;">Mbps</div>
                            </div>
                            
                            <div class="dashboard-card" style="padding: 20px; background: linear-gradient(135deg, #14b8a6, #0d9488); color: white;">
                                <div style="font-size: 11px; opacity: 0.9; margin-bottom: 8px; font-weight: 600;">⬆️ 上传速度</div>
                                <div style="font-size: 28px; font-weight: 800; margin-bottom: 4px;" id="perf-upload">0</div>
                                <div style="font-size: 10px; opacity: 0.8;">Mbps</div>
                            </div>
                            
                            <div class="dashboard-card" style="padding: 20px; background: linear-gradient(135deg, #ec4899, #db2777); color: white;">
                                <div style="font-size: 11px; opacity: 0.9; margin-bottom: 8px; font-weight: 600;">⚡ 运行任务</div>
                                <div style="font-size: 32px; font-weight: 800; margin-bottom: 4px;" id="perf-tasks">0</div>
                                <div style="font-size: 10px; opacity: 0.8;">个正在执行</div>
                            </div>
                            
                            <div class="dashboard-card" style="padding: 20px; background: linear-gradient(135deg, #f97316, #ea580c); color: white;">
                                <div style="font-size: 11px; opacity: 0.9; margin-bottom: 8px; font-weight: 600;">⏱️ 运行时长</div>
                                <div style="font-size: 28px; font-weight: 800; margin-bottom: 4px;" id="perf-uptime">00:00</div>
                                <div style="font-size: 10px; opacity: 0.8;">小时:分钟</div>
                            </div>
                        </div>
                        
                        <!-- CPU和内存趋势图 -->
                        <div class="grid-2" style="margin-bottom: 28px;">
                            <div class="dashboard-card">
                                <h3 style="margin-bottom: 16px; font-size: 16px; font-weight: 700; color: #1f2937;">
                                    📊 CPU趋势（30秒）
                                </h3>
                                <div class="trend-line-container" style="height: 150px;">
                                    <div class="trend-points" id="cpu-trend-bars"></div>
                                </div>
                            </div>
                            
                            <div class="dashboard-card">
                                <h3 style="margin-bottom: 16px; font-size: 16px; font-weight: 700; color: #1f2937;">
                                    📊 内存趋势（30秒）
                                </h3>
                                <div class="trend-line-container" style="height: 150px;">
                                    <div class="trend-points" id="memory-trend-bars"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 系统信息表格 -->
                        <div class="dashboard-card">
                            <h3 style="margin-bottom: 16px; font-size: 16px; font-weight: 700; color: #1f2937;">
                                🖥️ 系统信息
                            </h3>
                            <div class="grid-2" id="system-details-perf"></div>
                        </div>
                    </div>
                    
                    <!-- 任务历史 -->
                    <div id="history-tab" class="tab-content">
                        <h2>📋 任务历史</h2>
                        
                        <!-- 统计卡片 -->
                        <div class="grid-4" style="margin-bottom: 24px;">
                            <div class="dashboard-card" style="padding: 20px; background: linear-gradient(135deg, #10b981, #059669); color: white;">
                                <div style="font-size: 11px; opacity: 0.9; margin-bottom: 8px;">✅ 成功任务</div>
                                <div style="font-size: 32px; font-weight: 800;" id="history-success">0</div>
                            </div>
                            <div class="dashboard-card" style="padding: 20px; background: linear-gradient(135deg, #ef4444, #dc2626); color: white;">
                                <div style="font-size: 11px; opacity: 0.9; margin-bottom: 8px;">❌ 失败任务</div>
                                <div style="font-size: 32px; font-weight: 800;" id="history-failed">0</div>
                            </div>
                            <div class="dashboard-card" style="padding: 20px; background: linear-gradient(135deg, #f59e0b, #d97706); color: white;">
                                <div style="font-size: 11px; opacity: 0.9; margin-bottom: 8px;">💰 总收益</div>
                                <div style="font-size: 28px; font-weight: 800;" id="history-earnings">¥0.00</div>
                            </div>
                            <div class="dashboard-card" style="padding: 20px; background: linear-gradient(135deg, #3b82f6, #2563eb); color: white;">
                                <div style="font-size: 11px; opacity: 0.9; margin-bottom: 8px;">⏱️ 总耗时</div>
                                <div style="font-size: 28px; font-weight: 800;" id="history-duration">0分钟</div>
                            </div>
                        </div>
                        
                        <!-- 筛选和搜索 -->
                        <div class="dashboard-card" style="margin-bottom: 24px; padding: 20px;">
                            <div style="display: flex; gap: 16px; align-items: center; flex-wrap: wrap;">
                                <div style="flex: 1; min-width: 200px;">
                                    <input type="text" id="history-search" placeholder="🔍 搜索任务ID或类型..." 
                                           style="width: 100%; padding: 10px 16px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 14px;">
                                </div>
                                <select id="history-filter-status" style="padding: 10px 16px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 14px; cursor: pointer;">
                                    <option value="all">全部状态</option>
                                    <option value="success">✅ 成功</option>
                                    <option value="failed">❌ 失败</option>
                                    <option value="timeout">⏰ 超时</option>
                                </select>
                                <select id="history-filter-type" style="padding: 10px 16px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 14px; cursor: pointer;">
                                    <option value="all">全部类型</option>
                                    <option value="image_processing">🖼️ 图像处理</option>
                                    <option value="data_analysis">📊 数据分析</option>
                                    <option value="model_training">🤖 模型训练</option>
                                    <option value="video_encoding">🎬 视频编码</option>
                                    <option value="ai_inference">🧠 AI推理</option>
                                </select>
                                <button onclick="refreshTaskHistory()" style="padding: 10px 20px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer;">
                                    🔄 刷新
                                </button>
                            </div>
                        </div>
                        
                        <!-- 任务列表 -->
                        <div class="dashboard-card">
                            <div style="overflow-x: auto;">
                                <table style="width: 100%; border-collapse: collapse;">
                                    <thead>
                                        <tr style="background: #f9fafb; border-bottom: 2px solid #e5e7eb;">
                                            <th style="padding: 14px; text-align: left; font-size: 13px; font-weight: 700; color: #1f2937;">任务ID</th>
                                            <th style="padding: 14px; text-align: left; font-size: 13px; font-weight: 700; color: #1f2937;">类型</th>
                                            <th style="padding: 14px; text-align: left; font-size: 13px; font-weight: 700; color: #1f2937;">状态</th>
                                            <th style="padding: 14px; text-align: left; font-size: 13px; font-weight: 700; color: #1f2937;">开始时间</th>
                                            <th style="padding: 14px; text-align: left; font-size: 13px; font-weight: 700; color: #1f2937;">完成时间</th>
                                            <th style="padding: 14px; text-align: left; font-size: 13px; font-weight: 700; color: #1f2937;">耗时</th>
                                            <th style="padding: 14px; text-align: left; font-size: 13px; font-weight: 700; color: #1f2937;">收益</th>
                                            <th style="padding: 14px; text-align: center; font-size: 13px; font-weight: 700; color: #1f2937;">操作</th>
                                        </tr>
                                    </thead>
                                    <tbody id="history-table-body">
                                        <tr>
                                            <td colspan="8" style="padding: 60px; text-align: center; color: #9ca3af;">
                                                暂无历史任务记录
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- 分页 -->
                            <div id="history-pagination" style="display: flex; justify-content: center; align-items: center; gap: 12px; margin-top: 24px; padding-top: 24px; border-top: 1px solid #e5e7eb;">
                                <button onclick="previousHistoryPage()" style="padding: 8px 16px; background: white; border: 2px solid #e5e7eb; border-radius: 8px; font-weight: 600; cursor: pointer;">
                                    ← 上一页
                                </button>
                                <span style="color: #6b7280; font-size: 14px;">
                                    第 <span id="history-current-page">1</span> / <span id="history-total-pages">1</span> 页
                                </span>
                                <button onclick="nextHistoryPage()" style="padding: 8px 16px; background: white; border: 2px solid #e5e7eb; border-radius: 8px; font-weight: 600; cursor: pointer;">
                                    下一页 →
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 设置 -->
                    <div id="settings-tab" class="tab-content">
                        <h2>⚙️ 设置中心</h2>
                        
                        <!-- 设置分类导航 -->
                        <div style="display: flex; gap: 12px; margin-bottom: 28px; flex-wrap: wrap;">
                            <button class="settings-tab-btn active" data-tab="basic">🎨 基础设置</button>
                            <button class="settings-tab-btn" data-tab="performance">⚡ 性能设置</button>
                            <button class="settings-tab-btn" data-tab="earnings">💰 收益设置</button>
                            <button class="settings-tab-btn" data-tab="node">🌐 节点设置</button>
                            <button class="settings-tab-btn" data-tab="security">🔒 安全设置</button>
                            <button class="settings-tab-btn" data-tab="advanced">🛠️ 高级设置</button>
                        </div>
                        
                        <!-- 基础设置 -->
                        <div class="settings-section active" id="basic-settings">
                            <div class="dashboard-card" style="margin-bottom: 24px;">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">🌐 语言和区域 & 🎨 外观主题</h3>
                                <div class="settings-grid">
                                    <div class="form-group">
                                        <label>显示语言</label>
                                        <select id="language" class="glass-input">
                                            <option value="zh-CN">简体中文</option>
                                            <option value="en-US">English</option>
                                            <option value="ja-JP">日本語</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>时区</label>
                                        <select id="timezone" class="glass-input">
                                            <option value="Asia/Shanghai">北京时间 (GMT+8)</option>
                                            <option value="America/New_York">纽约时间 (GMT-5)</option>
                                            <option value="Europe/London">伦敦时间 (GMT+0)</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>主题模式</label>
                                        <select id="theme-mode" class="glass-input">
                                            <option value="auto">自动切换</option>
                                            <option value="light">浅色模式</option>
                                            <option value="dark">深色模式</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>主题色彩</label>
                                        <select id="theme-color" class="glass-input">
                                            <option value="purple">紫色（默认）</option>
                                            <option value="blue">蓝色</option>
                                            <option value="green">绿色</option>
                                            <option value="orange">橙色</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="dashboard-card">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">🚀 启动设置 & 🔔 通知设置</h3>
                                <div class="settings-grid-3">
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="auto-start" checked>
                                            <span>开机自启动</span>
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="minimize-start" checked>
                                            <span>最小化启动</span>
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="remember-login" checked>
                                            <span>记住登录</span>
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="notify-task" checked>
                                            <span>任务通知</span>
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="notify-earning" checked>
                                            <span>收益通知</span>
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="notify-error">
                                            <span>错误通知</span>
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="notify-sound" checked>
                                            <span>通知声音</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 性能设置 -->
                        <div class="settings-section" id="performance-settings">
                            <div class="dashboard-card" style="margin-bottom: 24px;">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">💻 CPU & 💾 内存 & 🎮 GPU设置</h3>
                                <div class="settings-grid">
                                    <div class="form-group form-group-full">
                                        <label>最大CPU使用率 (<span id="cpu-limit-value">80</span>%)</label>
                                        <input type="range" id="cpu-limit" min="20" max="100" value="80" style="width: 100%;">
                                    </div>
                                    <div class="form-group">
                                        <label>使用CPU核心数</label>
                                        <select id="cpu-cores" class="glass-input">
                                            <option value="auto">自动（推荐）</option>
                                            <option value="1">1 核心</option>
                                            <option value="2">2 核心</option>
                                            <option value="4">4 核心</option>
                                            <option value="8">8 核心</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px; margin-top: 30px;">
                                            <input type="checkbox" id="auto-release-memory" checked>
                                            <span>自动释放内存</span>
                                        </label>
                                    </div>
                                    <div class="form-group form-group-full">
                                        <label>最大内存使用 (<span id="memory-limit-value">4</span> GB)</label>
                                        <input type="range" id="memory-limit" min="1" max="16" value="4" style="width: 100%;">
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-gpu">
                                            <span>启用GPU加速</span>
                                        </label>
                                    </div>
                                    <div class="form-group form-group-full">
                                        <label>GPU显存限制 (<span id="gpu-memory-value">2</span> GB)</label>
                                        <input type="range" id="gpu-memory" min="1" max="8" value="2" style="width: 100%;">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="dashboard-card">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">⚡ 任务设置</h3>
                                <div class="settings-grid">
                                    <div class="form-group">
                                        <label>最大并发任务数</label>
                                        <input type="number" id="max-concurrent" value="3" min="1" max="10" class="glass-input">
                                    </div>
                                    <div class="form-group">
                                        <label>任务拉取间隔（秒）</label>
                                        <input type="number" id="task-interval" value="30" min="10" max="300" class="glass-input">
                                    </div>
                                    <div class="form-group">
                                        <label>任务优先级</label>
                                        <select id="task-priority" class="glass-input">
                                            <option value="high">高收益优先</option>
                                            <option value="fast">快速完成优先</option>
                                            <option value="balanced">平衡模式</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px; margin-top: 30px;">
                                            <input type="checkbox" id="auto-pull" checked>
                                            <span>自动拉取任务</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 收益设置 -->
                        <div class="settings-section" id="earnings-settings">
                            <div class="dashboard-card" style="margin-bottom: 24px;">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">💰 提现设置 & 📊 统计设置</h3>
                                <div class="settings-grid">
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="auto-withdraw">
                                            <span>启用自动提现</span>
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>自动提现阈值（¥）</label>
                                        <input type="number" id="withdraw-threshold" value="100" min="10" step="10" class="glass-input">
                                    </div>
                                    <div class="form-group">
                                        <label>提现方式</label>
                                        <select id="withdraw-method" class="glass-input">
                                            <option value="alipay">支付宝</option>
                                            <option value="wechat">微信支付</option>
                                            <option value="bank">银行卡</option>
                                            <option value="usdt">USDT</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>收益统计周期</label>
                                        <select id="stats-period" class="glass-input">
                                            <option value="daily">每日统计</option>
                                            <option value="weekly">每周统计</option>
                                            <option value="monthly">每月统计</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px; margin-top: 30px;">
                                            <input type="checkbox" id="export-earnings" checked>
                                            <span>自动导出报表</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="dashboard-card">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">💳 钱包配置</h3>
                                <div class="settings-grid">
                                    <div class="form-group">
                                        <label>钱包地址</label>
                                        <input type="text" id="wallet-address" placeholder="请输入钱包地址" class="glass-input">
                                    </div>
                                    <div class="form-group">
                                        <label>收款账户名</label>
                                        <input type="text" id="account-name" placeholder="请输入账户名" class="glass-input">
                                    </div>
                                    <div class="form-group form-group-full">
                                        <button class="btn btn-pull" onclick="saveWalletInfo()">💾 保存钱包信息</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 节点设置 -->
                        <div class="settings-section" id="node-settings">
                            <div class="dashboard-card" style="margin-bottom: 24px;">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">🌐 节点信息</h3>
                                <div class="form-group">
                                    <label>节点名称</label>
                                    <input type="text" id="node-name" placeholder="给你的节点起个名字" class="glass-input">
                                </div>
                                <div class="form-group">
                                    <label>节点描述</label>
                                    <textarea id="node-desc" placeholder="节点描述信息（可选）" class="glass-input" rows="3"></textarea>
                                </div>
                                <div class="form-group">
                                    <label>节点标签</label>
                                    <input type="text" id="node-tags" placeholder="用逗号分隔多个标签" class="glass-input">
                                </div>
                            </div>
                            
                            <div class="dashboard-card" style="margin-bottom: 24px;">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">💓 心跳设置</h3>
                                <div class="form-group">
                                    <label>心跳间隔（秒）</label>
                                    <input type="number" id="heartbeat-interval" value="30" min="10" max="300" class="glass-input" style="width: 200px;">
                                </div>
                                <div class="form-group">
                                    <label>心跳超时（秒）</label>
                                    <input type="number" id="heartbeat-timeout" value="10" min="5" max="60" class="glass-input" style="width: 200px;">
                                </div>
                                <div class="form-group">
                                    <label style="display: flex; align-items: center; gap: 10px;">
                                        <input type="checkbox" id="auto-heartbeat" checked>
                                        <span>自动发送心跳</span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="dashboard-card">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">🔄 连接设置</h3>
                                <div class="form-group">
                                    <label>服务器地址</label>
                                    <input type="text" id="api-url" value="http://8.218.206.57/api/v1" class="glass-input">
                                </div>
                                <div class="form-group">
                                    <label>重连策略</label>
                                    <select id="reconnect-strategy" class="glass-input" style="width: 200px;">
                                        <option value="auto">自动重连</option>
                                        <option value="manual">手动重连</option>
                                        <option value="smart">智能重连</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>最大重试次数</label>
                                    <input type="number" id="max-retry" value="5" min="1" max="20" class="glass-input" style="width: 150px;">
                                </div>
                            </div>
                        </div>
                        
                        <!-- 安全设置 -->
                        <div class="settings-section" id="security-settings">
                            <div class="dashboard-card" style="margin-bottom: 24px;">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">🔐 密码管理</h3>
                                <div class="form-group">
                                    <label>当前密码</label>
                                    <input type="password" id="current-password" placeholder="请输入当前密码" class="glass-input">
                                </div>
                                <div class="form-group">
                                    <label>新密码</label>
                                    <input type="password" id="new-password" placeholder="请输入新密码" class="glass-input">
                                </div>
                                <div class="form-group">
                                    <label>确认新密码</label>
                                    <input type="password" id="confirm-password" placeholder="请再次输入新密码" class="glass-input">
                                </div>
                                <button class="btn btn-pull" onclick="changePassword()">🔒 修改密码</button>
                            </div>
                            
                            <div class="dashboard-card" style="margin-bottom: 24px;">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">🔑 双因素认证</h3>
                                <div class="form-group">
                                    <label style="display: flex; align-items: center; gap: 10px;">
                                        <input type="checkbox" id="enable-2fa">
                                        <span>启用双因素认证（2FA）</span>
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label>认证方式</label>
                                    <select id="2fa-method" class="glass-input" style="width: 200px;">
                                        <option value="app">认证器应用</option>
                                        <option value="sms">短信验证</option>
                                        <option value="email">邮箱验证</option>
                                    </select>
                                </div>
                                <button class="btn" style="background: #10b981;" onclick="setup2FA()">⚙️ 配置2FA</button>
                            </div>
                            
                            <div class="dashboard-card" style="margin-bottom: 24px;">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">🔐 API密钥</h3>
                                <div class="form-group">
                                    <label>当前API密钥</label>
                                    <input type="text" id="api-key" value="sk-****************************" readonly class="glass-input">
                                </div>
                                <div style="display: flex; gap: 12px;">
                                    <button class="btn" style="background: #3b82f6;" onclick="showApiKey()">👁️ 显示</button>
                                    <button class="btn" style="background: #f59e0b;" onclick="regenerateApiKey()">🔄 重新生成</button>
                                    <button class="btn" style="background: #10b981;" onclick="copyApiKey()">📋 复制</button>
                                </div>
                            </div>
                            
                            <div class="dashboard-card">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">⏱️ 会话管理</h3>
                                <div class="form-group">
                                    <label>会话超时时间</label>
                                    <select id="session-timeout" class="glass-input" style="width: 200px;">
                                        <option value="30">30分钟</option>
                                        <option value="60">1小时</option>
                                        <option value="240">4小时</option>
                                        <option value="1440">24小时</option>
                                        <option value="never">永不过期</option>
                                    </select>
                                </div>
                                <button class="btn" style="background: #ef4444;" onclick="clearAllSessions()">🚫 清除所有会话</button>
                            </div>
                        </div>
                        
                        <!-- 高级设置 -->
                        <div class="settings-section" id="advanced-settings">
                            <div class="dashboard-card" style="margin-bottom: 24px;">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">📝 日志设置</h3>
                                <div class="form-group">
                                    <label>日志级别</label>
                                    <select id="log-level" class="glass-input" style="width: 200px;">
                                        <option value="error">错误</option>
                                        <option value="warn">警告</option>
                                        <option value="info">信息</option>
                                        <option value="debug">调试</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>日志保留天数</label>
                                    <input type="number" id="log-retention" value="7" min="1" max="90" class="glass-input" style="width: 150px;">
                                </div>
                                <div class="form-group">
                                    <label style="display: flex; align-items: center; gap: 10px;">
                                        <input type="checkbox" id="auto-clean-logs" checked>
                                        <span>自动清理过期日志</span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="dashboard-card" style="margin-bottom: 24px;">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">💾 数据管理</h3>
                                <div style="display: flex; gap: 12px; flex-wrap: wrap;">
                                    <button class="btn" style="background: #3b82f6;" onclick="backupData()">💾 备份数据</button>
                                    <button class="btn" style="background: #10b981;" onclick="restoreData()">📥 恢复数据</button>
                                    <button class="btn" style="background: #f59e0b;" onclick="exportConfig()">📤 导出配置</button>
                                    <button class="btn" style="background: #8b5cf6;" onclick="importConfig()">📥 导入配置</button>
                                </div>
                            </div>
                            
                            <div class="dashboard-card" style="margin-bottom: 24px;">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">🧹 缓存管理</h3>
                                <div class="form-group">
                                    <p style="color: #6b7280; margin-bottom: 12px;">
                                        当前缓存大小：<strong>128 MB</strong>
                                    </p>
                                </div>
                                <div style="display: flex; gap: 12px;">
                                    <button class="btn" style="background: #f59e0b;" onclick="clearCache()">🧹 清除缓存</button>
                                    <button class="btn" style="background: #ef4444;" onclick="clearAllData()">⚠️ 清除所有数据</button>
                                </div>
                            </div>
                            
                            <div class="dashboard-card" style="margin-bottom: 24px;">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">🔐 安全功能</h3>
                                <div class="settings-grid">
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-sandbox" checked>
                                            <span>启用沙盒隔离</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">任务在隔离环境中执行</p>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-encryption" checked>
                                            <span>启用数据加密</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">AES-256加密存储</p>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-audit" checked>
                                            <span>启用安全审计</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">记录所有操作日志</p>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-ip-whitelist">
                                            <span>启用IP白名单</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">限制访问IP地址</p>
                                    </div>
                                </div>
                                <button class="btn" style="background: #8b5cf6; margin-top: 12px;" onclick="viewAuditLogs()">📝 查看审计日志</button>
                            </div>
                            
                            <div class="dashboard-card" style="margin-bottom: 24px;">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">⚡ 性能优化</h3>
                                <div class="settings-grid">
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-multithread" checked>
                                            <span>多线程处理</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">最大4个并发Worker</p>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-cache" checked>
                                            <span>智能缓存</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">5分钟TTL，100条上限</p>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-smart-schedule" checked>
                                            <span>智能调度</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">AI驱动的任务调度</p>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-resume" checked>
                                            <span>断点续传</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">任务中断可恢复</p>
                                    </div>
                                </div>
                                <div style="display: flex; gap: 12px; margin-top: 12px;">
                                    <button class="btn" style="background: #3b82f6;" onclick="viewCacheStats()">📊 缓存统计</button>
                                    <button class="btn" style="background: #10b981;" onclick="runPerformanceTest()">⚡ 性能测试</button>
                                </div>
                            </div>
                            
                            <div class="dashboard-card" style="margin-bottom: 24px;">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">🤖 智能功能</h3>
                                <div class="settings-grid">
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-ai-assistant" checked>
                                            <span>AI智能助手</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">智能推荐和诊断</p>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-shortcuts" checked>
                                            <span>快捷键系统</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">Ctrl+/查看帮助</p>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-global-search" checked>
                                            <span>全局搜索</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">快速查找功能</p>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-power-saving">
                                            <span>节能模式</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">降低功耗和频率</p>
                                    </div>
                                </div>
                                <div style="display: flex; gap: 12px; margin-top: 12px;">
                                    <button class="btn" style="background: #8b5cf6;" onclick="showAISuggestions()">🤖 AI建议</button>
                                    <button class="btn" style="background: #10b981;" onclick="keyboardShortcuts.showShortcutsHelp()">⌨️ 快捷键</button>
                                </div>
                            </div>
                            
                            <div class="dashboard-card" style="margin-bottom: 24px;">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">📊 数据分析</h3>
                                <div class="settings-grid">
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-analytics" checked>
                                            <span>启用数据分析</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">收集使用数据</p>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-health-check" checked>
                                            <span>健康检查</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">定期系统检查</p>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-auto-backup" checked>
                                            <span>自动备份</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">每24小时备份</p>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-compression" checked>
                                            <span>数据压缩</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">节省存储空间</p>
                                    </div>
                                </div>
                                <div style="display: flex; gap: 12px; margin-top: 12px;">
                                    <button class="btn" style="background: #3b82f6;" onclick="viewTaskStats()">📊 任务统计</button>
                                    <button class="btn" style="background: #10b981;" onclick="viewEarningsTrend()">📈 收益趋势</button>
                                    <button class="btn" style="background: #f59e0b;" onclick="healthCheck.runAllChecks()">🔍 健康检查</button>
                                </div>
                            </div>
                            
                            <div class="dashboard-card" style="margin-bottom: 24px;">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">🎯 任务增强</h3>
                                <div class="settings-grid">
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-task-templates" checked>
                                            <span>任务模板</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">快速创建任务</p>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-scheduled-tasks">
                                            <span>定时任务</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">Cron定时执行</p>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-batch-tasks">
                                            <span>批量任务</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">批量提交处理</p>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-task-priority" checked>
                                            <span>优先级队列</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">动态优先级调度</p>
                                    </div>
                                </div>
                                <div style="display: flex; gap: 12px; margin-top: 12px;">
                                    <button class="btn" style="background: #8b5cf6;" onclick="viewTaskTemplates()">📋 任务模板</button>
                                    <button class="btn" style="background: #10b981;" onclick="createScheduledTask()">⏰ 创建定时任务</button>
                                </div>
                            </div>
                            
                            <div class="dashboard-card" style="margin-bottom: 24px;">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">🌐 网络优化</h3>
                                <div class="settings-grid">
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-network-monitor" checked>
                                            <span>网络监控</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">实时网络状态监控</p>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-auto-reconnect" checked>
                                            <span>自动重连</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">网络断开自动重连</p>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-request-merge">
                                            <span>请求合并</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">批量请求合并</p>
                                    </div>
                                    <div class="form-group">
                                        <label style="display: flex; align-items: center; gap: 10px;">
                                            <input type="checkbox" id="enable-compression-transfer">
                                            <span>压缩传输</span>
                                        </label>
                                        <p style="font-size: 11px; color: #6b7280; margin-top: 4px;">Gzip压缩数据</p>
                                    </div>
                                </div>
                                <button class="btn" style="background: #06b6d4; margin-top: 12px;" onclick="networkMonitor.measureSpeed()">📡 网络测速</button>
                            </div>
                            
                            <div class="dashboard-card">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">🔄 系统操作</h3>
                                <div style="display: flex; gap: 12px; flex-wrap: wrap;">
                                    <button class="btn" style="background: #10b981;" onclick="checkUpdate()">🔄 检查更新</button>
                                    <button class="btn" style="background: #f59e0b;" onclick="restartApp()">♻️ 重启应用</button>
                                    <button class="btn" style="background: #ef4444;" onclick="resetSettings()">⚠️ 重置设置</button>
                                    <button class="btn" id="logout-btn" style="background: #6b7280;">🚪 退出登录</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 保存按钮 -->
                        <div style="position: sticky; bottom: 0; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 16px; margin-top: 24px; text-align: center;">
                            <button class="btn" style="background: white; color: #667eea; font-size: 16px; font-weight: 700; padding: 14px 40px;" onclick="saveAllSettings()">
                                💾 保存所有设置
                            </button>
                        </div>
                    </div>
                    
                    <!-- 钱包 -->
                    <div id="wallet-tab" class="tab-content">
                        <h2>💎 我的钱包</h2>
                        
                        <!-- 钱包余额卡片 -->
                        <div class="grid-4" style="margin-bottom: 28px;">
                            <div class="dashboard-card" style="padding: 24px; background: linear-gradient(135deg, #f59e0b, #d97706); color: white;">
                                <div style="font-size: 12px; opacity: 0.9; margin-bottom: 8px;">💰 总余额</div>
                                <div style="font-size: 36px; font-weight: 800; margin-bottom: 4px;" id="wallet-balance">0.0000</div>
                                <div style="font-size: 11px; opacity: 0.8;">AIP Token</div>
                            </div>
                            <div class="dashboard-card" style="padding: 24px; background: linear-gradient(135deg, #10b981, #059669); color: white;">
                                <div style="font-size: 12px; opacity: 0.9; margin-bottom: 8px;">📈 总收益</div>
                                <div style="font-size: 36px; font-weight: 800; margin-bottom: 4px;" id="wallet-total-earned">0.0000</div>
                                <div style="font-size: 11px; opacity: 0.8;">AIP Token</div>
                            </div>
                            <div class="dashboard-card" style="padding: 24px; background: linear-gradient(135deg, #3b82f6, #2563eb); color: white;">
                                <div style="font-size: 12px; opacity: 0.9; margin-bottom: 8px;">📤 已提现</div>
                                <div style="font-size: 36px; font-weight: 800; margin-bottom: 4px;" id="wallet-withdrawn">0.0000</div>
                                <div style="font-size: 11px; opacity: 0.8;">AIP Token</div>
                            </div>
                            <div class="dashboard-card" style="padding: 24px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white;">
                                <div style="font-size: 12px; opacity: 0.9; margin-bottom: 8px;">⚡ 算力值</div>
                                <div style="font-size: 36px; font-weight: 800; margin-bottom: 4px;" id="wallet-computing-power">0</div>
                                <div style="font-size: 11px; opacity: 0.8;">CP</div>
                            </div>
                        </div>
                        
                        <!-- 钱包操作和地址 -->
                        <div class="grid-2" style="margin-bottom: 28px;">
                            <div class="dashboard-card">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">🏦 钱包地址</h3>
                                <div style="background: #f9fafb; padding: 16px; border-radius: 12px; margin-bottom: 16px;">
                                    <div style="font-size: 11px; color: #6b7280; margin-bottom: 8px;">TRON地址</div>
                                    <div style="font-family: monospace; font-size: 13px; color: #1f2937; word-break: break-all; font-weight: 600;" id="wallet-address-display">未连接钱包</div>
                                </div>
                                <div style="display: flex; gap: 12px;">
                                    <button class="btn" style="flex: 1; background: #3b82f6;" onclick="copyWalletAddress()">📋 复制地址</button>
                                    <button class="btn" style="flex: 1; background: #10b981;" onclick="showWalletQR()">📱 显示二维码</button>
                                </div>
                            </div>
                            
                            <div class="dashboard-card">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">⚡ 快捷操作</h3>
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                                    <button class="btn" style="background: #f59e0b; padding: 20px;" onclick="showTransfer()">
                                        <div style="font-size: 24px; margin-bottom: 8px;">💸</div>
                                        <div style="font-size: 14px;">转账</div>
                                    </button>
                                    <button class="btn" style="background: #10b981; padding: 20px;" onclick="showReceive()">
                                        <div style="font-size: 24px; margin-bottom: 8px;">📥</div>
                                        <div style="font-size: 14px;">收款</div>
                                    </button>
                                    <button class="btn" style="background: #ef4444; padding: 20px;" onclick="showWithdraw()">
                                        <div style="font-size: 24px; margin-bottom: 8px;">💰</div>
                                        <div style="font-size: 14px;">提现</div>
                                    </button>
                                    <button class="btn" style="background: #8b5cf6; padding: 20px;" onclick="syncWalletBalance()">
                                        <div style="font-size: 24px; margin-bottom: 8px;">🔄</div>
                                        <div style="font-size: 14px;">同步</div>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 交易记录 -->
                        <div class="dashboard-card">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <h3 style="font-size: 18px; font-weight: 700; color: #1f2937;">📜 交易记录</h3>
                                <select id="wallet-tx-filter" style="padding: 8px 16px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px;">
                                    <option value="all">全部交易</option>
                                    <option value="transfer">转账</option>
                                    <option value="receive">收款</option>
                                    <option value="withdraw">提现</option>
                                    <option value="earnings">收益</option>
                                </select>
                            </div>
                            <div style="overflow-x: auto;">
                                <table style="width: 100%; border-collapse: collapse;">
                                    <thead>
                                        <tr style="background: #f9fafb; border-bottom: 2px solid #e5e7eb;">
                                            <th style="padding: 14px; text-align: left; font-size: 13px; font-weight: 700; color: #1f2937;">时间</th>
                                            <th style="padding: 14px; text-align: left; font-size: 13px; font-weight: 700; color: #1f2937;">类型</th>
                                            <th style="padding: 14px; text-align: left; font-size: 13px; font-weight: 700; color: #1f2937;">对方</th>
                                            <th style="padding: 14px; text-align: right; font-size: 13px; font-weight: 700; color: #1f2937;">金额</th>
                                            <th style="padding: 14px; text-align: center; font-size: 13px; font-weight: 700; color: #1f2937;">状态</th>
                                            <th style="padding: 14px; text-align: center; font-size: 13px; font-weight: 700; color: #1f2937;">操作</th>
                                        </tr>
                                    </thead>
                                    <tbody id="wallet-tx-list">
                                        <tr>
                                            <td colspan="6" style="padding: 60px; text-align: center; color: #9ca3af;">
                                                暂无交易记录
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 推荐 -->
                    <div id="referral-tab" class="tab-content">
                        <h2>🎁 推荐奖励</h2>
                        
                        <!-- 推荐统计 -->
                        <div class="grid-4" style="margin-bottom: 28px;">
                            <div class="dashboard-card" style="padding: 24px; background: linear-gradient(135deg, #10b981, #059669); color: white;">
                                <div style="font-size: 12px; opacity: 0.9; margin-bottom: 8px;">👥 推荐人数</div>
                                <div style="font-size: 36px; font-weight: 800; margin-bottom: 4px;" id="referral-count">0</div>
                                <div style="font-size: 11px; opacity: 0.8;">人</div>
                            </div>
                            <div class="dashboard-card" style="padding: 24px; background: linear-gradient(135deg, #f59e0b, #d97706); color: white;">
                                <div style="font-size: 12px; opacity: 0.9; margin-bottom: 8px;">💰 推荐收益</div>
                                <div style="font-size: 36px; font-weight: 800; margin-bottom: 4px;" id="referral-earnings">0.0000</div>
                                <div style="font-size: 11px; opacity: 0.8;">AIP Token</div>
                            </div>
                            <div class="dashboard-card" style="padding: 24px; background: linear-gradient(135deg, #3b82f6, #2563eb); color: white;">
                                <div style="font-size: 12px; opacity: 0.9; margin-bottom: 8px;">✅ 活跃用户</div>
                                <div style="font-size: 36px; font-weight: 800; margin-bottom: 4px;" id="referral-active">0</div>
                                <div style="font-size: 11px; opacity: 0.8;">人</div>
                            </div>
                            <div class="dashboard-card" style="padding: 24px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white;">
                                <div style="font-size: 12px; opacity: 0.9; margin-bottom: 8px;">🎯 佣金比例</div>
                                <div style="font-size: 36px; font-weight: 800; margin-bottom: 4px;">10</div>
                                <div style="font-size: 11px; opacity: 0.8;">%</div>
                            </div>
                        </div>
                        
                        <!-- 推荐码和链接 -->
                        <div class="grid-2" style="margin-bottom: 28px;">
                            <div class="dashboard-card">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">🔗 推荐码</h3>
                                <div style="background: #f9fafb; padding: 16px; border-radius: 12px; margin-bottom: 16px; text-align: center;">
                                    <div style="font-size: 32px; font-weight: 800; color: #667eea; font-family: monospace; letter-spacing: 4px;" id="referral-code">XXXXX</div>
                                </div>
                                <button class="btn btn-pull" style="width: 100%;" onclick="copyReferralCode()">📋 复制推荐码</button>
                            </div>
                            
                            <div class="dashboard-card">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">🌐 推荐链接</h3>
                                <div style="background: #f9fafb; padding: 16px; border-radius: 12px; margin-bottom: 16px;">
                                    <div style="font-size: 12px; color: #1f2937; word-break: break-all;" id="referral-link">https://aip.com/register?ref=XXXXX</div>
                                </div>
                                <button class="btn btn-pull" style="width: 100%;" onclick="copyReferralLink()">📋 复制推荐链接</button>
                            </div>
                        </div>
                        
                        <!-- 推荐用户列表 -->
                        <div class="dashboard-card">
                            <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">👥 推荐用户列表</h3>
                            <div style="overflow-x: auto;">
                                <table style="width: 100%; border-collapse: collapse;">
                                    <thead>
                                        <tr style="background: #f9fafb; border-bottom: 2px solid #e5e7eb;">
                                            <th style="padding: 14px; text-align: left; font-size: 13px; font-weight: 700; color: #1f2937;">用户名</th>
                                            <th style="padding: 14px; text-align: left; font-size: 13px; font-weight: 700; color: #1f2937;">注册时间</th>
                                            <th style="padding: 14px; text-align: center; font-size: 13px; font-weight: 700; color: #1f2937;">状态</th>
                                            <th style="padding: 14px; text-align: right; font-size: 13px; font-weight: 700; color: #1f2937;">贡献收益</th>
                                        </tr>
                                    </thead>
                                    <tbody id="referral-user-list">
                                        <tr>
                                            <td colspan="4" style="padding: 60px; text-align: center; color: #9ca3af;">
                                                暂无推荐用户
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 诊断 -->
                    <div id="diagnostics-tab" class="tab-content">
                        <h2>🔍 系统诊断</h2>
                        
                        <!-- 系统健康状态 -->
                        <div class="grid-4" style="margin-bottom: 28px;">
                            <div class="dashboard-card" style="padding: 24px; background: linear-gradient(135deg, #10b981, #059669); color: white;">
                                <div style="font-size: 12px; opacity: 0.9; margin-bottom: 8px;">🟢 系统状态</div>
                                <div style="font-size: 36px; font-weight: 800; margin-bottom: 4px;" id="diag-system-status">健康</div>
                                <div style="font-size: 11px; opacity: 0.8;">所有检查通过</div>
                            </div>
                            <div class="dashboard-card" style="padding: 24px; background: linear-gradient(135deg, #3b82f6, #2563eb); color: white;">
                                <div style="font-size: 12px; opacity: 0.9; margin-bottom: 8px;">🌐 网络状态</div>
                                <div style="font-size: 36px; font-weight: 800; margin-bottom: 4px;" id="diag-network-status">正常</div>
                                <div style="font-size: 11px; opacity: 0.8;">延迟: <span id="diag-network-latency">0ms</span></div>
                            </div>
                            <div class="dashboard-card" style="padding: 24px; background: linear-gradient(135deg, #f59e0b, #d97706); color: white;">
                                <div style="font-size: 12px; opacity: 0.9; margin-bottom: 8px;">💾 存储状态</div>
                                <div style="font-size: 36px; font-weight: 800; margin-bottom: 4px;" id="diag-storage-status">充足</div>
                                <div style="font-size: 11px; opacity: 0.8;">可用: <span id="diag-storage-free">1.2 GB</span></div>
                            </div>
                            <div class="dashboard-card" style="padding: 24px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white;">
                                <div style="font-size: 12px; opacity: 0.9; margin-bottom: 8px;">🔐 安全状态</div>
                                <div style="font-size: 36px; font-weight: 800; margin-bottom: 4px;">安全</div>
                                <div style="font-size: 11px; opacity: 0.8;">无威胁检测</div>
                            </div>
                        </div>
                        
                        <!-- 诊断项目 -->
                        <div class="dashboard-card" style="margin-bottom: 28px;">
                            <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">📋 诊断项目</h3>
                            <div id="diagnostic-items"></div>
                            <button class="btn btn-pull" style="margin-top: 20px; width: 100%;" onclick="runFullDiagnostics()">
                                🔍 运行完整诊断
                            </button>
                        </div>
                        
                        <!-- 日志导出 -->
                        <div class="grid-2">
                            <div class="dashboard-card">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">📤 日志导出</h3>
                                <div style="display: flex; flex-direction: column; gap: 12px;">
                                    <button class="btn" style="background: #3b82f6;" onclick="exportSystemLogs()">📄 导出系统日志</button>
                                    <button class="btn" style="background: #10b981;" onclick="exportErrorLogs()">❌ 导出错误日志</button>
                                    <button class="btn" style="background: #f59e0b;" onclick="exportDiagReport()">📊 导出诊断报告</button>
                                </div>
                            </div>
                            <div class="dashboard-card">
                                <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">🛠️ 修复工具</h3>
                                <div style="display: flex; flex-direction: column; gap: 12px;">
                                    <button class="btn" style="background: #8b5cf6;" onclick="repairDatabase()">💾 修复数据库</button>
                                    <button class="btn" style="background: #ef4444;" onclick="clearTempFiles()">🧹 清理临时文件</button>
                                    <button class="btn" style="background: #06b6d4;" onclick="resetNetwork()">🌐 重置网络</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 通知 -->
                    <div id="notifications-tab" class="tab-content">
                        <h2>🔔 通知中心</h2>
                        
                        <!-- 通知统计 -->
                        <div class="grid-4" style="margin-bottom: 28px;">
                            <div class="dashboard-card" style="padding: 24px; background: linear-gradient(135deg, #3b82f6, #2563eb); color: white;">
                                <div style="font-size: 12px; opacity: 0.9; margin-bottom: 8px;">📬 全部通知</div>
                                <div style="font-size: 36px; font-weight: 800;" id="notif-total">0</div>
                            </div>
                            <div class="dashboard-card" style="padding: 24px; background: linear-gradient(135deg, #10b981, #059669); color: white;">
                                <div style="font-size: 12px; opacity: 0.9; margin-bottom: 8px;">✅ 任务通知</div>
                                <div style="font-size: 36px; font-weight: 800;" id="notif-task">0</div>
                            </div>
                            <div class="dashboard-card" style="padding: 24px; background: linear-gradient(135deg, #f59e0b, #d97706); color: white;">
                                <div style="font-size: 12px; opacity: 0.9; margin-bottom: 8px;">💰 收益通知</div>
                                <div style="font-size: 36px; font-weight: 800;" id="notif-earning">0</div>
                            </div>
                            <div class="dashboard-card" style="padding: 24px; background: linear-gradient(135deg, #ef4444, #dc2626); color: white;">
                                <div style="font-size: 12px; opacity: 0.9; margin-bottom: 8px;">⚠️ 警告通知</div>
                                <div style="font-size: 36px; font-weight: 800;" id="notif-warning">0</div>
                            </div>
                        </div>
                        
                        <!-- 通知筛选 -->
                        <div class="dashboard-card" style="margin-bottom: 24px; padding: 20px;">
                            <div style="display: flex; gap: 16px; align-items: center; flex-wrap: wrap;">
                                <select id="notif-filter" style="padding: 10px 16px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 14px; cursor: pointer;">
                                    <option value="all">全部通知</option>
                                    <option value="unread">未读通知</option>
                                    <option value="task">任务通知</option>
                                    <option value="earning">收益通知</option>
                                    <option value="warning">警告通知</option>
                                    <option value="system">系统通知</option>
                                </select>
                                <button class="btn" style="background: #10b981;" onclick="markAllRead()">✅ 全部标记已读</button>
                                <button class="btn" style="background: #ef4444;" onclick="clearAllNotifications()">🗑️ 清空所有</button>
                            </div>
                        </div>
                        
                        <!-- 通知列表 -->
                        <div class="dashboard-card">
                            <div id="notifications-list"></div>
                        </div>
                    </div>
                    
                    <!-- 更新 -->
                    <div id="updates-tab" class="tab-content">
                        <h2>🔄 系统更新</h2>
                        
                        <!-- 当前版本信息 -->
                        <div class="dashboard-card" style="margin-bottom: 28px; padding: 32px; text-align: center; background: linear-gradient(135deg, #667eea, #764ba2);">
                            <div style="font-size: 14px; color: white; opacity: 0.9; margin-bottom: 12px;">当前版本</div>
                            <div style="font-size: 48px; font-weight: 800; color: white; margin-bottom: 8px;">v1.0.0</div>
                            <div style="font-size: 12px; color: white; opacity: 0.8;">最后更新: 2024-01-15</div>
                        </div>
                        
                        <!-- 更新状态 -->
                        <div class="grid-3" style="margin-bottom: 28px;">
                            <div class="dashboard-card">
                                <h4 style="color: #6b7280; font-size: 13px; margin-bottom: 12px;">🔄 更新状态</h4>
                                <div style="font-size: 24px; font-weight: 800; color: #10b981;" id="update-status">已是最新</div>
                            </div>
                            <div class="dashboard-card">
                                <h4 style="color: #6b7280; font-size: 13px; margin-bottom: 12px;">📅 检查时间</h4>
                                <div style="font-size: 16px; font-weight: 700; color: #1f2937;" id="update-check-time">从未检查</div>
                            </div>
                            <div class="dashboard-card">
                                <h4 style="color: #6b7280; font-size: 13px; margin-bottom: 12px;">🎯 更新频道</h4>
                                <select id="update-channel" style="width: 100%; padding: 8px; border: 2px solid #e5e7eb; border-radius: 8px; font-weight: 600;">
                                    <option value="stable">稳定版</option>
                                    <option value="beta">测试版</option>
                                    <option value="dev">开发版</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- 检查更新 -->
                        <div class="dashboard-card" style="margin-bottom: 28px; text-align: center; padding: 32px;">
                            <button class="btn" style="background: linear-gradient(135deg, #667eea, #764ba2); font-size: 18px; padding: 16px 48px;" onclick="checkForUpdates()">
                                🔍 检查更新
                            </button>
                        </div>
                        
                        <!-- 更新历史 -->
                        <div class="dashboard-card">
                            <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">📜 更新历史</h3>
                            <div id="update-history">
                                <div style="padding: 20px; background: #f9fafb; border-radius: 12px; margin-bottom: 16px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                                        <strong style="font-size: 16px; color: #1f2937;">v1.0.0</strong>
                                        <span style="font-size: 12px; color: #6b7280;">2024-01-15</span>
                                    </div>
                                    <ul style="list-style: none; padding: 0; margin: 0;">
                                        <li style="padding: 8px 0; color: #4b5563;">✅ 初始版本发布</li>
                                        <li style="padding: 8px 0; color: #4b5563;">✅ 支持任务管理和执行</li>
                                        <li style="padding: 8px 0; color: #4b5563;">✅ 收益统计功能</li>
                                        <li style="padding: 8px 0; color: #4b5563;">✅ 钱包集成</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 自动更新设置 -->
                        <div class="dashboard-card" style="margin-top: 28px;">
                            <h3 style="margin-bottom: 20px; font-size: 18px; font-weight: 700; color: #1f2937;">⚙️ 自动更新设置</h3>
                            <div style="display: flex; flex-direction: column; gap: 16px;">
                                <label style="display: flex; align-items: center; gap: 12px;">
                                    <input type="checkbox" id="auto-update" checked style="width: 20px; height: 20px;">
                                    <span style="font-weight: 600;">启用自动更新</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 12px;">
                                    <input type="checkbox" id="auto-download" checked style="width: 20px; height: 20px;">
                                    <span style="font-weight: 600;">自动下载更新</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 12px;">
                                    <input type="checkbox" id="update-notify" checked style="width: 20px; height: 20px;">
                                    <span style="font-weight: 600;">更新通知提醒</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
      </div>
    
    <script src="api-integration.js"></script>
    <script src="security-sandbox.js"></script>
    <script src="advanced-features.js"></script>
    <script src="smart-features.js"></script>
    <script src="real-task-executor.js"></script>
    <script src="performance-optimizer.js"></script>
    <script src="performance-monitor.js"></script>
    <script src="css-charts.js"></script>
    <script src="perf-updater.js"></script>
    <script src="task-modules.js"></script>
    <script src="task-renderer.js"></script>
    <script src="task-processor.js"></script>
    <script src="task-history.js"></script>
    <script src="earnings-modules.js"></script>
    <script src="earnings-loader.js"></script>
    <script src="log-utils.js"></script>
    <script src="dynamic-island.js"></script>
    <script src="settings-manager.js"></script>
    <script src="wallet-manager.js"></script>
    <script src="referral-manager.js"></script>
    <script src="diagnostics-manager.js"></script>
    <script src="notifications-manager.js"></script>
    <script src="updates-manager.js"></script>
    <script src="advanced-ui-handlers.js"></script>
    <script src="main.js"></script>
    <script>
        // 启动性能监控和灵动岛
        window.addEventListener('load', () => {
            if (typeof startPerformanceMonitoring === 'function') {
                startPerformanceMonitoring();
            }
        });
    </script>
  </body>
</html>
